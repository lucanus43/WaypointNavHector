<?xml version="1.0"?>

<launch>
  <param name="use_sim_time"              value="true" />

  <!-- Start Gazebo with wg world running in (max) realtime -->
  <include file="$(find hector_gazebo_worlds)/launch/small_indoor_scenario.launch"/>

  <!-- Spawn simulated quadrotor uav -->
  <include file="$(find hector_quadrotor_gazebo)/launch/spawn_quadrotor_with_stereo.launch" >
  <arg name="use_ground_truth_for_control" value="false"/>
   <arg name="use_ground_truth_for_tf" value="true"/>

  </include>
  
  <!-- Start rtabmap visualization -->
  <include file="$(find rtabmap_ros)/launch/rtabmap.launch" >
  	<arg name="rtabmap_args" value="--delete_db_on_start udebug"/>
  	<arg name="stereo" value="true"/>
  	<arg name="frame_id" value="base_link"/> 
  	<arg name="stereo_namespace" value=""/>
  	<arg name="compressed" value="true"/> 
  	<arg name="left_image_topic" value="/camera/left/image_raw" />
  	<arg name="right_image_topic" value="/camera/right/image_raw" /> 
  	<arg name="left_camera_info_topic"  value="/camera/left/camera_info" />
	<arg name="right_camera_info_topic" value="/camera/right/camera_info" />
  	<arg name="rviz" value="false"/>
  	<arg name="rtabmapviz" value="true"/>
  	<arg name="wait_for_transform" value="1.0"/>
  	<arg name="queue_size" value="10"/>
  </include>
  	

  <!-- Start rviz visualization with preset config -->
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find hector_quadrotor_demo)/rviz_cfg/outdoor_flight_asus_cam.rviz"/>

  <include file="$(find hector_quadrotor_teleop)/launch/xbox_controller.launch" >
    <arg name="control_mode" value="position"/>
  </include>

</launch>
