<?xml version="1.0"?>

<launch>
  <param name="use_sim_time"              value="true" />

  <!-- Start Gazebo with wg world running in (max) realtime -->
  <include file="$(find hector_gazebo_worlds)/launch/VTR_indoor_scenario.launch"/>

  <!-- Spawn simulated quadrotor uav -->
  <include file="$(find hector_quadrotor_gazebo)/launch/spawn_quadrotor_with_asus.launch" >
  <arg name="use_ground_truth_for_control" value="false"/>
   <arg name="use_ground_truth_for_tf" value="true"/>

  </include>
  
  <!-- Start rtabmap visualization -->
  <include file="$(find rtabmap_ros)/launch/rtabmap.launch" >
  	<arg name="rtabmap_args" value="--delete_db_on_start"/>
  	<arg name="rviz" value="false"/>
  	<arg name="rtabmapviz" value="true"/>
  	<arg name="rgb_topic" value="/cam_msg_interceptor/rgb/image_raw"/>
  	<arg name="depth_topic" value="/cam_msg_interceptor/depth/image_raw"/>
  	<arg name="camera_info_topic" value="/cam_msg_interceptor/depth/camera_info" />
  	<arg name="wait_for_transform" value="1.0"/>
  	<arg name="queue_size" value="1000"/>
  </include>
  	
  	
  <node pkg="cam_msg_interceptor" type="cam_msg_interceptor" name="cam_msg_interceptor" output="screen">
   	<param name="camera_topic" value="camera"/>
  </node>

  <!-- Start rviz visualization with preset config -->
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find hector_quadrotor_demo)/rviz_cfg/outdoor_flight_asus_cam.rviz"/>

  <include file="$(find hector_quadrotor_teleop)/launch/xbox_controller.launch" >
    <arg name="control_mode" value="position"/>
  </include>

</launch>
